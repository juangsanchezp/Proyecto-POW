<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Carta Pokémon</title>
  <link rel="stylesheet" href="../css/carta.css" />
</head>
<body style="margin: 0">

  <div id="contenedor-carta"></div>

  <script type="module">
    import { obtenerPokemonPorId } from '../js/api.js';
    import { crearVistaCarta } from '../js/carta.js';

    const params = new URLSearchParams(window.location.search);
    const id = params.get("id");
    const from = params.get("from");

    if (id) {
      obtenerPokemonPorId(id).then(pokemon => {
        const carta = crearVistaCarta(pokemon);
        document.getElementById("contenedor-carta").appendChild(carta);

        // Si viene desde colección, agregar botones dentro de la carta
        if (from === "coleccion") {
          const boton3D = document.createElement("button");
          boton3D.textContent = "Ver en 3D";
          boton3D.classList.add("boton-3d");
          boton3D.onclick = () => {
            window.location.href = `diseño3d.html?id=${pokemon.id}&nombre=${encodeURIComponent(pokemon.name)}`;
          };

          const botonRegresar = document.createElement("button");
          botonRegresar.textContent = "Regresar a colección";
          botonRegresar.classList.add("boton-3d", "regresar-btn");
          botonRegresar.onclick = () => {
            window.location.href = "index.html";
          };

          const contenedor = carta.querySelector('.card-container');
          if (contenedor) {
            const contenedorBotones = document.createElement('div');
            contenedorBotones.style.marginTop = '1.5rem';
            contenedorBotones.style.textAlign = 'center';
            contenedorBotones.appendChild(boton3D);
            contenedorBotones.appendChild(document.createElement("br"));
            contenedorBotones.appendChild(botonRegresar);
            contenedor.appendChild(contenedorBotones);
          }
        }
      });
    }
  </script>
</body>
</html>




